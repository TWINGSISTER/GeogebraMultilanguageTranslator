<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>Start Geogebra Translator</title>
  </head>
  <body>
    <h3 style="text-align: justify;">How to start the translator</h3>
    <p style="text-align: justify;">Click on one of these to start Geogebra
      Translator in Version 5.0. Different builds of GGB are available:</p>
    <ul style="text-align: justify;">
      <li><a href="index-620.html" target="_blank">Build 620 GG original</a></li>
      <li><a href="index-686.html" target="_blank">Build 686 GG original</a></li>
      <li><a href="index-private-687.html" target="_blank">Build 687 generated
          by GitHub Actions</a></li>
      <li><a href="index-private-latest.html" target="_blank">Latest Build
          generated by GitHub Actions (now 720)</a></li>
    </ul>
    <p style="text-align: justify;">GGB builds generated by GitHub Actions are
      available as releases in <a href="https://github.com/TWINGSISTER/Geogebra-Javascript-Bundle"
        target="_blank">this repository</a>.&nbsp; </p>
    <h3 style="text-align: justify;">How to use the translator</h3>
    <p style="text-align: justify;">The translator&nbsp; starts as a Geogebra
      page. To obtain a multilingual version of SomeName.ggb file one has to
      give the two letter code XY of the original language (e.g. EN) and click
      the button "Export Translation" then a file picker comes up and you can
      select one or more files SomeName.ggb. </p>
    <p style="text-align: justify;">The service promt to download&nbsp;
      SomeName-FL-XY.html and SomeName-FL.ggb. Next you have to translate all
      the strings in the file SomeName-FL-XY.html with some automatic
      translation system (<a href="https://webgate.ec.europa.eu/etranslation/translateTextSnippet.html"
        target="_blank">this one can do the job</a>. For an alternative <a href="textsnippet.html"
        title="Translate GGB activity wording as a text snippet" target="_blank">see
        this process</a>.). Let assume that we want to have the XZ and YZ
      version too. So we have to prepare SomeName-FL-XZ.html and&nbsp;
      SomeName-FL-YZ.html. You can do this by hand using the Notepad++ editor
      (archived <a href="https://web.archive.org/web/20220109011708/https://portableapps.com/downloading/?a=Notepad%2B%2BPortable&amp;n=Notepad++%20Portable&amp;s=s&amp;p=&amp;d=pa&amp;f=NotepadPlusPlusPortable_8.2.paf.exe"
        target="_blank">here</a>) with the XML Tools installed (archived <a href="https://web.archive.org/web/20210915015302/https://sourceforge.net/projects/npp-plugins/files/XML%20Tools/Xml%20Tools%202.4.9%20Unicode/"
        target="_blank">here</a>). In the menu&nbsp; Plugins&gt;XML Tools select
      "pretty print - indent attributes", do your modifications and then in the
      same menu choose "linearize" and save.</p>
    <p style="text-align: justify;">Now you can build your multi-language
      version of your GGB activity SomeName.ggb. Simply press the button "Import
      Translations" and in the file picker select SomeName-FL.ggb.
      SomeName-FL-XY.html SomeName-FL-XZ.html and&nbsp; SomeName-FL-YZ.html. If
      in the first step you asked to process more than one file then in this
      step you must provide all the generated and translated files. </p>
    <p style="text-align: justify;">The system will output and ask you to
      download file SomeName-FL-XY-XZ-YZ.ggb. Loading this in GGB will give you
      the original SomeName.ggb decorated with an additional button LNG that you
      can use to switch the language of the exercise. </p>
    <p style="text-align: justify;">You can find an example of the resulting GGB
      activity <a href="example.html" target="_blank">here</a> that is taken
      from <a href="http://www.lycee-valin.fr/maths/exercices_en_ligne/moodle.html"
        target="_blank">this site</a>.</p>
    <h3 style="text-align: justify;">Features</h3>
    <p style="text-align: justify;">In some framework (e.g. Moodle question
      banks), turning on&nbsp; automatic translation within your browser can do
      the trick and present acceptable translation of school activities.&nbsp;
      With Geogebra this will not work. Furthermore, in many occasions,
      translating&nbsp; a Geogebra activity require to get some grasp upon the
      developer logic and very often, if you are not the developer, to build a
      new activity from the scratch is easier than translating an existing one.
      <br>
      <br>
      This package tries to do its best to extract all textual elements from an
      activity, feed them through an online translator, record the translation
      and build some persistent machinery, in the Geogebra ggb document. The
      goal is to record the two or more linguistic versions of an activity
      within a single ggb file. This ggb, then&nbsp; can then be shipped as a
      standalone classroom activity. <br>
      <br>
      This tool does not try to generate automatically a translation using an
      online translation. This tool produce an HTML list of all the strings that
      needs translation. The user can translate this document by hand or by
      feeding it thru some online translation facility. The translated HTML will
      then be automatically linked within a multi-lingual ggb activity.</p>
    <p style="text-align: justify;"><br>
      This package handles&nbsp; multi-language ggb supporting several languages
      within a single ggb document. This package can, somehow, follow the
      development process. For instance, the teacher, &nbsp; having slightly
      changed the logic of an activity, keeping all the textual parts unchanged,
      has the option to rebuild the multilingual ggb without repeating all the
      process. On the other hand if some strings are changed the process must
      update strings only in a particular language and then ask to some online
      translator, for an update of&nbsp; all the other translations.Then a new
      build is required. The same is for adding a new language.</p>
    <h3 style="text-align: justify;">Debugging the translation</h3>
    <p style="text-align: justify;">Some translation string might not fit
      nicely. You can see where the problem is and try a quick fix directly in
      the ggb file. The user can find the translated strings in the Algebra view
      as Geogebra Text Auxiliary objects with special names following the
      pattern ZZ000&lt;languageCode&gt;&lt;originalObjectName&gt;.</p>
    <p style="text-align: justify;"><br>
      Therefore, for instance, if your .ggb contains a button named
      ```BoutonOui``` with caption "Oui" you will find in the Algebra View the
      strings `ZZ000frBoutonOui` with value "Oui" but also `ZZ000itBoutonOui`
      with value "Si" and `ZZ000enBoutonOui` with value "Yes". If you are not
      satisfied with this you can edit these strings and changes will be
      reflected in your Geogebra activity (e.g. you can put "Yeah!" into
      ```ZZ000enBoutonOui```). If you save the file with the result of your work
      you will have a version of your activity that will preserve the fixes you
      worked out. <br>
      <br>
      This .ggb it is ready to receive modified translations, too. If you modify
      the logic of the activity and ask for revising an already worked out
      translation the existing translation strings are not recomputed and only
      newly introduced&nbsp; untranslated objects are translated and
      inserted.&nbsp; If you delete a translation string
      `ZZ000enBoutonOui`&nbsp; the relative object will be considered as
      untranslated and generated again the first time you ask to merge an `EN`
      translation. <br>
      <br>
      So, if you operate a single language .ggt you can safely delete all&nbsp;
      the `ZZ000&lt;languagexx&gt;&lt;originalObjectName&gt;` strings in the
      Algebra view if you are not interested in language "xx" anymore. This will
      make the ggb document more compact and responsive.&nbsp;&nbsp; </p>
    <h3 style="text-align: justify;">Browser problems</h3>
    <p style="text-align: justify;">The translator tool works only in the
      Geogebra web version some&nbsp; problems might come from security
      limitations of the browser. You can circumvent it by running the Geogebra
      applet in Chrome with the option `--disable-site-isolation-trials
      --disable-web-security` e.g. in Windows </p>
    <div style="text-align: justify;">
      <pre>"C:\Program Files (x86)\Google\Chrome\Application\chrome.exe" --disable-site-isolation-trials --disable-web-security --user-data-dir="I:\temp"</pre>
    </div>
    <p style="text-align: justify;"> For Chrome you might try also
      --disable-web-security --allow-no-sandbox-job
      --allow-sandbox-debugging&nbsp; --no-sandbox&nbsp;
      --no-sandbox-and-elevated&nbsp; --no-zygote --no-zygote-sandbox
      --run-without-sandbox-for-testing --disable-popup-blocking&nbsp;&nbsp;
      --user-data-dir="I:\temp" they could help. </p>
    <p style="text-align: justify;">The file index&lt;somename&gt;.html loads
      the GGB application and the GGB activity `transMulti.ggb` into a GGB
      Applet that runs in a browser. Loading could be slow. While debugging you
      can re-initialize the translator from the GGB File menu by reloading the
      `transMulti.ggb` file.</p>
    <h3 style="text-align: justify;">Translator Tuning and&nbsp; Configuration</h3>
    <p style="text-align: justify;">There is a central selected place in this JS
      code where, even the un-experienced programmer, can do some editing to
      make the translator comply with a known style used in textual elements for
      a set of known ggb activities. This configuration parameters are strings
      that are found either in the context of function calls or as assignments
      to variables in the&nbsp; file <b>init.js</b> . So in the following we
      list all possible configuration options referring them either as function
      call parameter or as expression in assignment. You can find them with some
      comments in the file <b>init.js</b></p>
    <p style="text-align: justify;">To understand the possible tuning operations
      one has to consider the fact that this process works in two steps. The
      first step locates what must be translated. The second step takes several
      translations and apply them. Troubles in the first step comes mainly from
      the fact that something that must not be translated is fed to the
      translator, the obvious example being LaTeX commands (e.g. \text)&nbsp;
      that are ubiquitous in GGB activities and should become \texte or
      whatever. There are a number of ways to get this. Let's step thru the
      relative code in init.ts </p>
    <p style="text-align: justify;">list in the call to updateDictionary the
      strings that need no translation. They will remain as they are if they are
      EXACTLY occurring as strings. If you put "XYZ" here also \text{XYZ}
      "'XYZ", "&nbsp; XYZ&nbsp; " will pass untranslated.</p>
    <pre style=" text-align: justify;">	updateDictionary(["\\text{", "}","{"...])</pre>
    <p style="text-align: justify;"> There are a pair of initialization that
      helps the software to parse LaTeX code. Note that a complete LaTeX parser
      (if ever available) is not of great help because often GGB activity
      creators mix textual content and&nbsp; <b>fragments</b> of LaTeX code to
      be assembled in a complete LaTeX expression as the activity proceeds. The
      dictionary dict initialized by:</p>
    <pre style=" text-align: justify;">var dict = new Map( [ ["text",1],["bar",1],...])</pre>
    <p style="text-align: justify;">contain as keys the Latex commands with the
      number of required parameters. Being a map keys can also be regexp. The
      system recognize latex command on the ground of the&nbsp; dictionary
      initialized by:</p>
    <pre style=" text-align: justify;">&nbsp;&nbsp;&nbsp; updateLatexPatterns([<br>&nbsp;&nbsp;&nbsp; '\\\\cr','\\\\\\\\',<br>&nbsp;&nbsp;&nbsp; '\\\\;','\\\\,',<br>&nbsp;&nbsp;&nbsp; '\\\\left\\(','\\\\right\\)',<br>	...<br>&nbsp;&nbsp;&nbsp; '\\\\left','\\\\right', <br>&nbsp;&nbsp;&nbsp; '\\\\[a-zA-Z]{2,}',&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; '\\\\[^a-zA-Z]',&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; '\\\\[^\\{|^\\s|^\\\\]*'&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; ]);</pre>
    <p style="text-align: justify;">&nbsp;that is pretty complete. Note that
      prefixes like '\\\\left' comes before the longer match '\\\\left\\['&nbsp;
      Finally note that pressing F12 in the console of the browser debugger the
      translator writes some debug messages.<br>
      <br>
      In the second step problems can only come from the external translator and
      you can solve them simply revising the html file returned by the
      translator before applying it. Very often you will find recurring problems
      like "Dernier exercice" being continuously missed as "Last fiscal year"
      and so on. You can decide that every time from FR to EN "plan" is
      translated into "airplane" you will be glad to see "Last exercise" you
      have a place to instruct the second step to do so. You must modify the
      code in the function definition for&nbsp; initFalsePair and add a couple
      in the second parameter of the call to updateFalsePair(XX,[..]) where XX
      is the target language. For instance adding a line like:</p>
    <pre style=" text-align: justify;">function initFalsePair() {<br>&nbsp;&nbsp;&nbsp; updateFalsePair("EN", ....<br>["Dernierexercice","Last exercise"],</pre>
    <p style="text-align: justify;">will ignore the translation&nbsp; in the
      ...-FL-XX_EN.html for the key Derniereexercice and put there "Last
      exercise".&nbsp; You can find the key Derniereexercice in the file
      ...-FL-XX_EN.html it will look like this&nbsp; </p>
    <pre style=" text-align: justify;">&lt;div id="texte40ovalboxArg1textArg1"
	data-title="Dernierexercice"
class="noop"&gt;Last fiscal year&lt;/div&gt;
</pre>
    <p style="text-align: justify;">The key Derniereexercice is based on the
      original text and therefore this will apply probably to other similar
      situations in other&nbsp; activities in French. Please note that the false
      pair is stored in a JS map and therefore in the initialization you can use
      a regexp as a key i.e.&nbsp; /Derniere[s]?exercice[s]?/ instead of
      "Derniereexercice" and match also the four keys Dernieresexercices,
      Dernieresexercice etc. (actually never tried this).</p>
    <h3 style="text-align: justify;">Eclipse Repository</h3>
    <p style="text-align: justify;">This project was developed and maintained
      using Eclipse and Egit. Not all the files have a&nbsp; clear meaning. The
      repository is undoubtedly messy. Nevertheless the repository contains all
      files generated by Eclipse. By forking this in GitHub and by cloning your
      fork directly from&nbsp; GitHub into Eclipse with a Egit clone operation
      you will get an Eclipse project to modify and develop this package on your
      own. If you feel that later on you can cooperate with us&nbsp; branch your
      project locally this will make your contribution later submit-able as a
      pull request. The `.launch` files you will find in this repo must be
      imported into Eclipse separately to get debug configurations. </p>
    <ul style="text-align: justify;">
    </ul>
  </body>
</html>
